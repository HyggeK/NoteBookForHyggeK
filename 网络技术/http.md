# http发展的历程

http1.0 ——http1.1——http2.0——http3.0

https(SSL TLS)

# http1.0

1. 无状态
2. 80端口
3. 短连接
4. 使用TCP协议
5. 主要缺点：
   - 过多的RTT开销，导致延迟
   - 明文传输，导致不安全
   - 连接无法复用，导致过多的tcp连接在网络延迟较高的情景下十分影响体验

## http1.0用户点击鼠标之后发生的几个事件

1. 浏览器分析链接指向页面的URL
2. 浏览器向DNS请求解析域名的IP地址
3. 浏览器与服务器建立TCP连接
4. 浏览器发出操作命令
5. 服务器给出响应
6. 释放TCP连接
7. 浏览器显示响应结果

# http1.1

1. 支持持久连接
2. 流水线模式和非流水线模式
3. TCP连接复用
4. 一个包含有许多图像的网页文件的多个请求和应答可以在一个连接中传输，但每个单独的网页文件的请求和应答仍然需要使用各自的连接
5. 添加更多的请求头和响应头来改进和扩充功能
   - Host请求头字段
   - 身份认证、状态管理、Cache缓存等机制的请求头
6. 缓存处理
7. 带宽优化以及网络连接的使用
8. 错误通知的管理
9. 消息在网络中的发送
10. 互联网地址的维护
11. 安全性及完整性

# http2.0

1. 使用二进制传输
2. 首部压缩
3. 让所有数据共用一个连接，解决tcp调谐导致的具有突发性和短时性的http低效问题
4. 服务端推送

# http3.0

1. 使用基于UDP的传输层协议QUIC
   1. 像TCP一样可靠
   2. 实现数据传输的0-RTT延迟
   3. 安全性保障
   4. 使用应用数据二进制分帧传输
   5. 彻底解决HOL阻塞问题，使不同的流之间真正的相互独立
   6. 切换网络时连接保持
   7. https://www.jianshu.com/p/bb3eeb36b479

# https

1. 使用SSL协议加密
2. 端口号443
3. 四次握手
   1. 浏览器将自己支持的一套加密规则发送给网站。
   2. 网站从中选出一组加密算法与HASH算法，并将自己的身份信息以证书的形式发回给浏览器。证书里面包含了网站地址，加密公钥，以及证书的颁发机构等信息。
   3. 获得网站证书之后浏览器要做以下工作：
      1. 验证证书的合法性（颁发证书的机构是否合法，证书中包含的网站地址是否与正在访问的地址一致等），如果证书受信任，则浏览器栏里面会显示一个小锁头，否则会给出证书不受信的提示。
      2. 如果证书受信任，或者是用户接受了不受信的证书，浏览器会生成一串随机数的密码，并用证书中提供的公钥加密。
      3. 使用约定好的HASH计算握手消息，并使用生成的随机数对消息进行加密，最后将之前生成的所有信息发送给网站。
   4. 网站接收浏览器发来的数据之后要做以下的操作：
      1. 使用自己的私钥将信息解密取出密码，使用密码解密浏览器发来的握手消息，并验证HASH是否与浏览器发来的一致。
      2. 使用密码加密一段握手消息，发送给浏览器。
   5. 浏览器解密并计算握手消息的HASH，如果与服务端发来的HASH一致，此时握手过程结束，之后所有的通信数据将由之前浏览器生成的随机密码并利用对称加密算法进行加密。